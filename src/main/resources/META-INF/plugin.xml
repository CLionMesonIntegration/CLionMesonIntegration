<idea-plugin>
    <idea-version since-build="201" until-build="201.*"/>
    <id>com.non.null.dinu.MesonIntegration</id>
    <name>CLion Meson Integration</name>
    <vendor email="dinu.blanovschi@criptext.com" url="http://www.github.com/NonNullDinu/CLionMesonIntegration">
        NonNullDinu
    </vendor>

    <description>
        <![CDATA[
        This plugin attempts to deliver cmake-like integration for meson in CLion.
        ]]>
    </description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.cidr.lang</depends>
    <depends>com.intellij.modules.clion</depends>
    <depends optional="true" config-file="with_rust.xml">org.jetbrains.rust</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileType name="Meson Build" implementationClass="com.nonnulldinu.clionmeson.filetypes.MesonBuildFileType"
                  language="MesonBuildLang" fileNames="meson.build"/>

        <lang.parserDefinition language="MesonBuildLang"
                               implementationClass="com.nonnulldinu.clionmeson.languages.parsers.MesonBuildParserDefinition"/>
        <lang.syntaxHighlighterFactory language="MesonBuildLang"
                                       implementationClass="com.nonnulldinu.clionmeson.build.language.highlighting.MesonBuildSyntaxHighlighterFactory"/>

        <!-- Completions -->
        <completion.contributor language="MesonBuildLang"
                                implementationClass="com.nonnulldinu.clionmeson.build.language.completions.MesonBuildCompletionContributor"/>

        <!-- Project Creation -->
        <directoryProjectGenerator implementation="com.nonnulldinu.clionmeson.project.MesonProjectGeneratorC"/>
        <directoryProjectGenerator implementation="com.nonnulldinu.clionmeson.project.MesonProjectGeneratorCPP"/>

        <!-- Run Configurations -->
        <stepsBeforeRunProvider implementation="com.nonnulldinu.clionmeson.runconfigurations.MesonCompileTaskProvider"
                                id="MesonCompileTaskProviderId"/>
        <configurationType implementation="com.nonnulldinu.clionmeson.runconfigurations.MesonConfigurationType"/>

        <!-- Error Handling -->
        <errorHandler implementation="com.nonnulldinu.clionmeson.errorHandler.ErrorSubmitter"/>
    </extensions>

    <!-- Project listeners -->
    <projectListeners>
        <listener class="com.nonnulldinu.clionmeson.project.MesonProjectListener" topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </projectListeners>

    <actions>
        <action class="com.nonnulldinu.clionmeson.errorHandler.TriggerErrorAction"/>
    </actions>
</idea-plugin>